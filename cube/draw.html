<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Draw</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <script src="jquery-3.3.1.min.js"></script>
    <script src="draw.js"></script>
    <script language="JavaScript">

        function add(input) {
            let dataUrl;
            const type = input.constructor.name;
            if (type === "String") {
                dataUrl = input;
            } else if (type === "HTMLCanvasElement") {
                dataUrl = input.toDataURL("image/png");
            } else if (type === "CanvasRenderingContext2D") {
                dataUrl = input.canvas.toDataURL("image/png");
            }
            $("#ncd").append($("<img/>").attr("src", dataUrl));
        }

        function testCrop() {
            const context = NilCube.createContext(400);
            context.fillStyle = "green";
            context.fillRect(50, 50, 150, 150);
            context.fillStyle = "green";
            context.fillRect(51, 51, 148, 148);
            context.fillStyle = "blue";
            context.fillRect(52, 52, 146, 146);

            const croppedContext = NilCube.autoCrop(context);
            add(context);
            add(croppedContext);
        }

        function testWall3() {
            const nc = new NilCube(3);
            // add(nc.u("Y","Y","Y","Y","Y","Y","Y","Y","Y"));
            add(nc._wall("RGB"));
            add(nc._wall("RGB", {height: 1, lineWidth: 1}, false));
            add(nc._wall("YYYYYY"));
            add(nc._wall("RYRYDYBYB"));
            add(nc._wall("RGBYRGBYRGBYRGBYRG", {height: 0.75, lineWidth: 0.8}, false));
        }

        function testWall() {
            const nc = new NilCube(3);
            add(nc._cubicle("Y", 1000, 800, 50, 40, {row: 1, col: 2}));
            // const w = nc._wall("YYYY RBGO WWWW DDDD", false, 0.7);
            // add(w);
            // const s = nc._side2("YYYY RBGO WWWW DDDD", false, 0.6);
            // add(s);
            // add(NilCube.skew(s, -0.2));
            // add(NilCube.skew(s, 0.2));
            // add(NilCube.fakePerspective(s));
            // add(s);
            // add(NilCube.fakePerspective(NilCube.autoCrop(s)));
            // add(NilCube.autoCrop(s));
        }

        function init() {
            testWall3();
            // standardCases();

            // const base = new NilCube(3);
            // const u = base.u(
            //     "Y", "G", "Y",
            //     "B", "Y", "R",
            //     "Y", "O", "Y");
            // const f = base.f(
            //     "O", "Y", "D"
            // );
            // const b = base.b(
            //     "R", "G", "B"
            // );
            // const r = base.r(
            //     "D", "Y", "W"
            // );
            // const l = base.l(
            //     "B", "G", "B"
            // );
            // const a = base.a(
            //     "00:22", "01:10", "21:00"
            // );
            // add(a);
            // add(u);
            // add(f);
            // add(b);
            // add(l);
            // add(r);
            // add(base.toImage("raw"));
            // add(base.toImage());
            // add(base.toImage(512, "white"));

            // initOld();
            // testCrop();

            // positioning();
        }

        function positioning() {
            add(NilCube.asImage(0, null, {
                type: 2,
                u: ["W", "W", "W", "W"]
            }));

            add(NilCube.asImage(0, null, {
                type: 2,
                u: ["W", "W", "W", "W"],
                f: ["W", "W"],
                b: ["W", "W"],
                r: ["W", "W"],
                l: ["W", "W"],
            }));

            add(NilCube.asImage(0, null, {
                type: 2,
                u: ["W", "W", "W", "W"],
                f: ["W", "W", "D", "D"],
                b: ["W", "W", "D", "D"],
                r: ["W", "W", "D", "D"],
                l: ["W", "W", "D", "D"],
            }));

            add(NilCube.asImage(0, null, {
                type: 3,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W"]
            }));

            add(NilCube.asImage(0, null, {
                type: 3,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W"],
                b: ["W", "W", "W"],
                r: ["W", "W", "W"],
                l: ["W", "W", "W"],
            }));

            add(NilCube.asImage(0, null, {
                type: 3,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "D", "D", "D"],
                b: ["W", "W", "W", "D", "D", "D"],
                r: ["W", "W", "W", "D", "D", "D"],
                l: ["W", "W", "W", "D", "D", "D"],
            }));

            add(NilCube.asImage(0, null, {
                type: 4,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"]
            }));

            add(NilCube.asImage(0, null, {
                type: 4,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "W"],
                b: ["W", "W", "W", "W"],
                r: ["W", "W", "W", "W"],
                l: ["W", "W", "W", "W"],
            }));

            add(NilCube.asImage(0, null, {
                type: 4,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "W", "D", "D", "D", "D"],
                b: ["W", "W", "W", "W", "D", "D", "D", "D"],
                r: ["W", "W", "W", "W", "D", "D", "D", "D"],
                l: ["W", "W", "W", "W", "D", "D", "D", "D"],
            }));

            add(NilCube.asImage(0, null, {
                type: 5,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"]
            }));

            add(NilCube.asImage(0, null, {
                type: 5,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "W", "W"],
                b: ["W", "W", "W", "W", "W"],
                r: ["W", "W", "W", "W", "W"],
                l: ["W", "W", "W", "W", "W"],
            }));

            add(NilCube.asImage(0, null, {
                type: 5,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D"],
                b: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D"],
                r: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D"],
                l: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D"],
            }));

            add(NilCube.asImage(0, null, {
                type: 5,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"],
                f: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D", "Y", "Y", "Y", "Y", "Y", "G", "G", "G", "G", "G", "G"],
                b: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D", "Y", "Y", "Y", "Y", "Y", "G", "G", "G", "G", "G", "G"],
                r: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D", "Y", "Y", "Y", "Y", "Y", "G", "G", "G", "G", "G", "G"],
                l: ["W", "W", "W", "W", "W", "D", "D", "D", "D", "D", "Y", "Y", "Y", "Y", "Y", "G", "G", "G", "G", "G", "G"],
            }));
        }

        function standardCases() {
            const edgeTest = {
                type: 3,
                u: ["Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y", "Y"],
                f: ["G", "G", "G"],
                b: ["B", "B", "B"],
                r: ["O", "O", "O"],
                l: ["R", "R", "R"],
            };
            add(NilCube.asImage(256, "white", edgeTest));

            const base4x4 = {
                type: 4,
                u: ["W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W", "W"]
            };
            add(NilCube.asImage(256, "white", base4x4));

            const jpermb = {
                type: 3,
                u: ["Y", "Y", "Y10:026,226,121", "Y", "Y", "Y:10,12,02,015", "Y", "Y02:105,215,201", "Y12:006,206,101"],
                f: ["B", "R", "R"],
                b: ["R", "G", "G"],
                l: ["O", "O", "O"],
                r: ["G", "B", "B"],
                a: ["20:22", "12:21"]
            };
            add(NilCube.asImage(512, "white", jpermb));

            const sune2 = {
                type: 2,
                u: ["D", "D", "W", "D"],
                f: ["D", "W"],
                b: ["D", "W"],
                l: ["D", "D"],
                r: ["D", "W"],
            };
            add(NilCube.asImage(256, "white", sune2));

            sune2.cube = "#eeeeee";
            sune2.core = "#bbbbbb";
            sune2.dark = "#dddddd";
            add(NilCube.asImage(256, "white", sune2));

            // 3x3 CF LLb
            // ncd.begin(3);
            // ncd.u(["D", "D", "D", "D", "D", "D", "D", "D", "D"]);
            // ncd.f(["D", "D", "D"]);
            // ncd.b(["D", "D", "D", "D", "D", "D", "D", "W", "D"]);
            // ncd.l(["W", "D", "W"]);
            // ncd.r(["Y", "Y", "Y"]);
            // ncd.append($("<img/>").attr("src", ncd.end(512, "white")));

            // poly test
            // ncd.begin(3);
            // ncd._roundPoly(ncd._context, [[50, 50, 10], [250, 50, 20], [300, 100, 30], [250, 150, 40], [50, 150, 50]]);
            // ncd._context.lineWidth = ncd._size / 8;
            // ncd._context.strokeStyle = "orange";
            // ncd._context.stroke();
            // ncd.append($("<img/>").attr("src", ncd.end(512, "white")));
        }
    </script>
    <style>
        img {
            border: 1px solid dimgray;
            padding: 0;
            background-color: lightgray;
        }
    </style>
</head>
<div id="ncd"></div>
<div id="vcube" style="zoom:2.9;">
    <!--<img src="images/3x3-plljb.png"/> <img src="images/2x2-oll27.png"/> <img src="images/3x3-cfllb.png"/>-->
</div>
<body onload="init()"></body>
</html>